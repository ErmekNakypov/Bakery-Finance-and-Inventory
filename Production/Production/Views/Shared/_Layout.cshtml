@using System.Security.Claims
@using DocumentFormat.OpenXml.Wordprocessing
<!doctype html>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/styles.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<header style="display: flex; align-items: center; padding: 1px 15px;">
    <div style="flex: 1"></div>
    <h1 style=" text-align: center">
        KSTU CAKES
    </h1>

    @if (User.Identity.IsAuthenticated)
    {
        var userRole = User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Role)?.Value ?? "Unknown";

        <div class="dropdown" style="display: flex; justify-content: flex-end; flex: 1; gap: 15px;">
            <a class="report-link" href="@Url.Action("InitReport", "Report")">Reports</a>
            <button class="btn btn-secondary dropdown-toggle" type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                User: @User.Identity.Name |
                Role: @userRole
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                <li><a class="dropdown-item" href="/Profile/GetProfile">Profile</a></li>
                <li><a class="dropdown-item" href="/Login/ChangePassword">Change password</a></li>
                <li>
                    <form method="post" asp-controller="Login" asp-action="Logout" style="margin: 0;">
                        <button type="submit" class="dropdown-item">Log out</button>
                    </form></li>
            </ul>
        </div>
    }
</header>
<nav>
    <ul>
        <li><a href="@Url.Action("GetAllProducts", "Product")">Products</a></li>
        <li><a href="@Url.Action("InitIngredients", "Ingredient")">Ingredients</a></li>
        <li><a href="@Url.Action("GetAllRawMaterials", "RawMaterial")">Raw materials</a></li>
        <li><a href="@Url.Action("GetAllPositions", "Position")">Positions</a></li>
        <li><a href="@Url.Action("GetAllEmployees", "Employee")">Employees</a></li>
        <li><a href="@Url.Action("GetBudget", "Budget")">Budget</a></li>
        <li><a href="@Url.Action("GetAllRawMaterialPurchases", "RawMaterialPurchase")">Raw material purchase</a></li>
        <li><a href="@Url.Action("GetAllProductSales", "ProductSale")">Product Sale</a></li>
        <li><a href="@Url.Action("GetAllMeasurementUnits", "MeasurementUnit")">Measurement Unit</a></li>
        <li><a href="@Url.Action("GetAllProductManufacturing", "ProductManufacturing")">Product Manufacturing</a></li>
        <li><a href="@Url.Action("InitPayroll", "Payroll")">Payroll</a></li>
        <li><a href="@Url.Action("GetCredits", "Credit")">Credit</a></li>
        <li><a href="@Url.Action("GetPayments", "Payment")">Payment</a></li>
    </ul>
</nav>
<main>
    @RenderBody()
</main>
@await RenderSectionAsync("Scripts", required: false)
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
</body>
</html> 